<div container>
  {%- if section.settings.video == null and section.settings.video_url != null -%}
    {%- liquid
            assign loop = ''
            if section.settings.enable_video_looping
              assign loop = '&loop=1&playlist=' | append: video_id
            endif
          -%}
    {%- if section.settings.video_url.type == 'youtube' -%}
      <iframe
        src="https://www.youtube.com/embed/{{ video_id }}?enablejsapi=1&autoplay=1{{ loop }}"
        class="js-youtube"
        allow="autoplay; encrypted-media"
        allowfullscreen
        title="{{ section.settings.description | escape }}"></iframe>
    {%- else -%}
      <iframe
        src="https://player.vimeo.com/video/{{ video_id }}?autoplay=1{{ loop }}"
        class="js-vimeo"
        allow="autoplay; encrypted-media"
        allowfullscreen
        title="{{ section.settings.description | escape }}"></iframe>
    {%- endif -%}
  {%- else -%}
    {{
       section.settings.video
     | video_tag:
     image_size: '1100x',
     autoplay: true,
     loop: section.settings.enable_video_looping,
     controls: true,
     muted: false }}
  {%- endif -%}
  {% comment %} {{ section.settings.video_label }} {% endcomment %}
</div>

{% schema %}
  {
    "name": "t:sections.video.name",
    "tag": "section",
    "class": "section",
    "disabled_on": {
      "groups": ["header", "footer"]
    },
    "settings": [
      {
        "type": "header",
        "content": "Text"
      },
      {
        "type": "inline_richtext",
        "id": "heading",
        "default": "Video",
        "label": "t:sections.video.settings.heading.label"
      },
      {
        "type": "richtext",
        "id": "video_label",
        "label": "Video Label"
      },
      {
        "type": "checkbox",
        "id": "enable_video_looping",
        "label": "t:sections.video.settings.enable_video_looping.label",
        "default": false
      }, {
        "type": "header",
        "content": "t:sections.video.settings.header__1.content"
      }, {
        "type": "video",
        "id": "video",
        "label": "t:sections.video.settings.video.label"
      }, {
        "type": "header",
        "content": "t:sections.video.settings.header__2.content"
      }, {
        "type": "paragraph",
        "content": "t:sections.video.settings.paragraph.content"
      }, {
        "type": "video_url",
        "id": "video_url",
        "accept": [
          "youtube", "vimeo"
        ],
        "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
        "label": "t:sections.video.settings.video_url.label",
        "info": "t:sections.video.settings.video_url.info"
      }, {
        "type": "image_picker",
        "id": "cover_image",
        "label": "t:sections.video.settings.cover_image.label"
      }, {
        "type": "text",
        "id": "description",
        "label": "t:sections.video.settings.description.label",
        "info": "t:sections.video.settings.description.info"
      }
    ],
    "presets": [
      {
        "name": "t:sections.video.presets.name"
      }
    ]
  }
{% endschema %}